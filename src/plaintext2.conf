# Exact NIP-11 endpoint â†’ relay app (takes precedence)
location = /.well-known/nostr.json {
    proxy_pass http://127.0.0.1:8080;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;

    # Use your existing cache zone
    proxy_cache relay1_matrus_org_cache;
    proxy_cache_valid 200 1m;
    add_header X-Cache $upstream_cache_status always;

    # CORS/cache headers (the app also sets these)
    add_header Access-Control-Allow-Origin "*" always;
    add_header Access-Control-Allow-Methods "GET, OPTIONS, HEAD" always;
    add_header Access-Control-Allow-Headers "Content-Type, Accept" always;
    add_header Cache-Control "public, max-age=60" always;
}

# Optional aliases (the app serves these too)
location = /nostr.json { proxy_pass http://127.0.0.1:8080; }
location = /nip11      { proxy_pass http://127.0.0.1:8080; }